<% content_for :crumbs do %>
    <%= render 'crumb_all' %>
    <li class="pull-right"><%= ibtn_link_to('add', new_entry_path) %></li>
<% end %>

<form class="form-inline" action="<%= entries_path %>" method="GET">

  <div class="form-group">
    <label for="client_id">Client</label>
    <% options = options_from_collection_for_select(Client.all, :id, :name, request[:client_id]) %>
    <%= select_tag('client_id', options, {:include_blank => true}) %>
  </div>

  <div class="form-group">
    <label for="from">From</label>
    <input type="date" class="form-control" id="to" name="from" value="<%= request[:from] %>" placeholder="Start Date" />
  </div>

  <div class="form-group">
    <label for="to">To</label>
    <input type="date" class="form-control" id="from" name="to" value="<%= request[:to] %>" placeholder="Start Date" />
  </div>

  <button type="submit" class="btn">filter</button>

</form>

<br/>

<div class="table-responsive">
  <table class="table">
    <tr>
      <th>Id</th>
      <th>Client</th>
      <th>Project</th>
      <th>Task</th>
      <th>Invoice</th>
      <th>Rate</th>
      <th>Hours</th>
      <th>Total</th>
      <th>Done At</th>
      <th></th>
    </tr>

    <% @entries.each do |entry| %>
        <tr>
          <td><%= entry.id %></td>
          <td><%= entry.task.project.client %></td>
          <td><%= entry.task.project %></td>
          <td><%= entry.task %></td>
          <td><%= entry.invoice %></td>
          <td><%= entry.rate %></td>
          <td><%= entry.hours %></td>
          <td><%= number_to_currency(entry.hours * entry.rate) %></td>
          <td><%= entry.done_at.strftime('%m/%d/%Y') %></td>
          <td><%= ibtn_link_to('OPEN', entry_path(entry)) %></td>
        </tr>
    <% end %>

    <tfoot>
    <tr>
      <td></td>
      <td></td>
      <td></td>
      <td></td>
      <td></td>
      <td></td>
      <td><%= @hours %></td>
      <td><%= number_to_currency(@total) %></td>
      <td></td>
      <td></td>
    </tr>
    </tfoot>

  </table>
</div>